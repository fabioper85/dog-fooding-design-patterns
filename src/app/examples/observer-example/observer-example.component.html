<behavioural-pg-desc></behavioural-pg-desc>
<div class="accordion" id="factoryAccordionExample">
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button
        class="accordion-button collapsed"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#collapseOne"
        aria-expanded="false"
        aria-controls="collapseOne"
      >
        <strong>Descrizione</strong>
      </button>
    </h2>
    <div
      id="collapseOne"
      class="accordion-collapse collapse"
      data-bs-parent="#factoryAccordionExample"
      style=""
    >
      <div class="accordion-body">
        <!-- INSERIRE QUI IL CORPO DELL'ACCORDION -->
      </div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button
        class="accordion-button collapsed"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#collapseTwo"
        aria-expanded="false"
        aria-controls="collapseTwo"
      >
        <strong>Caratteristiche</strong>
      </button>
    </h2>
    <div
      id="collapseTwo"
      class="accordion-collapse collapse"
      data-bs-parent="#factoryAccordionExample"
    >
      <div class="accordion-body">
        <ul class="mb-0">
          <li>
            Consente agli oggetti di osservare e ascoltare gli eventi su altri
            oggetti
          </li>
          <li>
            Gli oggetti possono essere avvisati e rispondere a cambiamenti di
            stato
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button
        class="accordion-button collapsed"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#collapseThree"
        aria-expanded="false"
        aria-controls="collapseThree"
      >
        <span class="badge text-bg-warning">Esempio</span>
      </button>
    </h2>
    <div
      id="collapseThree"
      class="accordion-collapse collapse"
      data-bs-parent="#singletonAccordionExample"
    >
      <div class="accordion-body">
        <div class="row justify-content-center g-0">
          <button
            class="btn btn-warning"
            (click)="createSubject()"
            [disabled]="subject"
          >
            Crea Soggetto @if(subject){<span class="badge text-bg-success"
              >Done!</span
            >}
          </button>
        </div>
        @if(subject) {
        <div class="row justify-content-between mt-2">
          <div class="col-sm-9 mb-2 mb-sm-0">
            <input
              type="text"
              class="form-control form-control-sm"
              id="employeeName"
              placeholder="Messaggio"
              [(ngModel)]="messageToSend"
            />
          </div>
          <div class="col-sm-3 mb-2 mb-sm-0">
            <button
              class="btn btn-outline-danger btn-sm w-100"
              (click)="broadcastMessage()"
            >
              Aggiorna
            </button>
          </div>
        </div>
        } @if(subject) {
        <h6 class="mt-4 text-center">Aggiungi osservatore</h6>
        <div class="row justify-content-between">
          <div class="col-sm-4 mb-2 mb-sm-0">
            <input
              type="text"
              class="form-control form-control-sm"
              id="employeeName"
              placeholder="Nome"
              [(ngModel)]="newObserverName"
            />
          </div>
          <div class="col-sm-5 mb-2 mb-sm-0">
            <select
              class="form-select form-select-sm"
              aria-label="employeeTypeSelect"
              [(ngModel)]="newObserverTypeSelected"
            >
              @for (op of observerTypeOps; track op.value) {
              <option [selected]="op.selected" [value]="op.value">
                {{ op.label }}
              </option>
              }
            </select>
          </div>
          <div class="col-sm-3 mb-2 mb-sm-0">
            <button
              class="btn btn-outline-primary btn-sm w-100"
              (click)="addObserver()"
            >
              Crea
            </button>
          </div>
        </div>
        @if(observersList.length > 0){
        <div class="row mt-2 px-0">
          <div class="col-12">
            @for(obn of observersList; track obn.name) {
            <strong
              ><span
                class="badge rounded-pill obs-pill"
                [ngClass]="{
                'text-bg-primary': obn.type === observerTypes.SIMPLE,
                'text-bg-danger': obn.type === observerTypes.FANCY,
              }"
                (click)="removeObserver(obn.name)"
                >{{ obn.name }}</span
              ></strong
            >
            }
          </div>
        </div>
        } }
      </div>
    </div>
  </div>
</div>
<example-link
  [exampleType]="exampleType"
  textLink="Observer pattern link" />
